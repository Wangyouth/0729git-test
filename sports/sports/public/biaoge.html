<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ajax获取数据显示的三种方式</title>
    <script src="javascripts/template-web.js"></script>
</head>

<body>

    <table border="1">
        <thead>
            <tr>
                <th>姓名：</th>
                <th>年龄：</th>
                <th>性别：</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>

    <!-- //模板引擎 -->
    <script type="text/html" id="tpl">
            {{each list}}
            <tr>
                <td>{{$value.username}}</td>
                <td>{{$value.age}}</td>
                <td>{{$value.gender}}</td>
            </tr>
            {{/each}}
    </script>

    <!-- 响应json数据到页面之上 -->
    <script>
        var xhr = new XMLHttpRequest();
        var tbody = document.querySelector('tbody');
        xhr.onload = function () {
            console.log("请求已经完成")
            if (xhr.status == 200) {
                // console.log(xhr.responseText)
                var data = JSON.parse(xhr.responseText);

                //常规方法输出到页面上--方法一
                for (var i = 0; i < data.list.length; i++) {
                    var tr = document.createElement('tr');
                    for (var attr in data.list[i]) {
                        var td = document.createElement('td');
                        td.innerHTML = data.list[i][attr];
                        tr.append(td);
                    }
                    tbody.append(tr)
                }

                // Z这里是模板字符串的方法--方法二
                // tbody.innerHTML = data.list.map((v, i) => {
                //     return `
                //         <tr>
                //             <td>${v.username}</td>
                //             <td>${v.age}</td>
                //             <td>${v.gender}</td>
                //         </tr>
                //     `
                // }).join('');


                //模板引擎-的方法---方法三
                // tbody.innerHTML = template('tpl', data)
            }
        }
        xhr.open('GET', '/listlist', true)
        xhr.send()


        // var username="zozo";
        // var info=`my name is ${username}`

    </script>


</body>

</html>