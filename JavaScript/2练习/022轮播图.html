<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>轮播图</title>
		<script src="020左右缓动.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			@font-face {
				font-family: 'icomoon';
				src: url('fonts/icomoon.eot?mzyg4v');
				src: url('fonts/icomoon.eot?mzyg4v#iefix') format('embedded-opentype'),
					url('fonts/icomoon.ttf?mzyg4v') format('truetype'),
					url('fonts/icomoon.woff?mzyg4v') format('woff'),
					url('fonts/icomoon.svg?mzyg4v#icomoon') format('svg');
				font-weight: normal;
				font-style: normal;
				font-display: block;
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			li {
				list-style: none;
			}

			.box {
				position: relative;
				width: 552px;
				height: 310px;
				background-color: #0099cc;
				margin: 10px auto;
				overflow: hidden;
			}

			.btn_left {
				display: none;
				position: absolute;
				top: 140px;
				left: 0;
				width: 30px;
				height: 30px;
				background-color: rgba(0, 0, 0, 0.5);
				border-top-right-radius: 50%;
				border-bottom-right-radius: 50%;
				font-family: 'icomoon';
				text-align: center;
				line-height: 30px;
				z-index: 1;
				cursor: pointer;
			}

			.btn_right {
				display: none;
				position: absolute;
				top: 140px;
				right: 0;
				width: 30px;
				height: 30px;
				background-color: rgba(0, 0, 0, 0.5);
				border-top-left-radius: 50%;
				border-bottom-left-radius: 50%;
				font-family: 'icomoon';
				text-align: center;
				line-height: 30px;
				z-index: 1;
				cursor: pointer;
			}

			.box .banner {
				position: absolute;
				top: 0;
				left: 0;
				width: 700%;
				height: 310px;

			}

			.box .banner li {
				float: left;
			}

			.box .banner li img {
				width: 552px;
				height: 310px;
			}

			.box ol {
				position: absolute;
				bottom: 0;
				left: 50px;
				margin-bottom: 10px;
				/* z-index: 1; */
			}

			.box ol li {
				float: left;
				width: 10px;
				height: 10px;
				margin: 0 4px;
				border: #FFFFFF;
				border-radius: 50%;
				border: 1px solid #FFFFFF;
				/* background-color: white; */
			}
		</style>
	</head>
	<body>
		<div class="box">
			<div class="btn_left"></div>
			<div class="btn_right"></div>
			<ul class="banner">
				<li><img src="images/lbt1.png"></li>
				<li><img src="images/lbt2.png"></li>
				<li><img src="images/lbt3.png"></li>
				<li><img src="images/lbt4.png"></li>
				<li><img src="images/lbt5.png"></li>
				<li><img src="images/lbt6.png"></li>
			</ul>
			<ol class="cricle">
			</ol>

			<script type="text/javascript">
				//1、鼠标经过box显示左右按钮
				var box = document.querySelector('.box');
				var btnleft = document.querySelector('.btn_left');
				var btnright = document.querySelector('.btn_right');
				box.addEventListener('mouseenter', function() {
					btnleft.style.display = 'block';
					btnright.style.display = 'block';
					clearInterval(timer);
					timer = null;
				});
				box.addEventListener('mouseleave', function() {
					btnleft.style.display = 'none';
					btnright.style.display = 'none';
					timer = setInterval(function() {
						btnright.click();
					}, 1600);
				});

				//2、根据ul里面的li个数动态生成ol里里面的li的个数
				var ul = box.querySelector('ul');
				var ol = box.querySelector('.cricle');
				var imgW = box.offsetWidth; //图片每次移动的宽度，也就是轮播图盒子的宽度
				for (var i = 0; i < ul.children.length; i++) {
					var li = document.createElement('li');
					li.setAttribute('index', i);
					ol.appendChild(li);
					//点击相应的小点，小点变成白色
					li.addEventListener('click', function() {
						for (var i = 0; i < ol.children.length; i++) {
							ol.children[i].style.backgroundColor = null;
						}
						this.style.backgroundColor = '#FFFFFF';

						//点击小点，走到对应的图片
						var index = this.getAttribute('index');
						num = index;
						cir = index;
						animation(ul, -index * imgW);
					});
				}
				//把里面的第一个ol变成白底选中
				ol.children[0].style.backgroundColor = '#FFFFFF';

				//克隆ul里面的第一个li，加到最后面去，实现无缝轮播图
				var firstli = ul.children[0].cloneNode(true);
				ul.appendChild(firstli);
				
				//3、点击右按钮移动图片
				var num = 0;
				var cir = 0;
				btnright.addEventListener('click', function() {
					if (num == ul.children.length - 1) {
						ul.style.left = 0;
						num = 0;
					}
					num++;
					animation(ul, -num * imgW);
					//ol里面的小点也跟着动
					cir++;
					if (cir == ol.children.length) {
						cir = 0;
					}
					for (var i = 0; i < ol.children.length; i++) {
						ol.children[i].style.backgroundColor = null;
					}
					ol.children[cir].style.backgroundColor = '#FFFFFF';
				});


				//4、点击左按钮移动图片
				btnleft.addEventListener('click', function() {
					if (num === 0) {
						num = ul.children.length - 1;
						ul.style.left = -num * imgW + 'px';
					}
					num--;
					animation(ul, -num * imgW);
					//ol里面的小点也跟着动
					cir--;
					if (cir < 0) {
						cir = ol.children.length - 1;
					}
					for (var i = 0; i < ol.children.length; i++) {
						ol.children[i].style.backgroundColor = null;
					}
					ol.children[cir].style.backgroundColor = '#FFFFFF';
				});

				//5,自动播放轮播图
				var timer = setInterval(function() {
					btnright.click();
				}, 1600);
			</script>
		</div>
	</body>
</html>
