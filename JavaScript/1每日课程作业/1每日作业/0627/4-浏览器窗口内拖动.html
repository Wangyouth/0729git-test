<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>浏览器窗口内拖动</title>
	<style type="text/css">
		.box {
			position: absolute;
			top: 0;
			left: 0;
			width: 100px;
			height: 100px;
			background-color: #000000;
		}

		.btn {
			float: right;
			margin: 0 auto;
		}
	</style>
	<script type="text/javascript">
		window.addEventListener('load', function () {
			var box = document.querySelector('.box');
			var btn = document.querySelector('.btn')
			var arrLeft = []
			var arrTop = []
			box.onmousedown = function () {
				document.onmousemove = function (e) {
					var x = e.pageX;
					var y = e.pageY;

					var boxX = x - box.offsetWidth / 2;
					var boxY = y - box.offsetHeight / 2;
					if (boxX >= window.innerWidth - box.offsetWidth) {
						boxX = window.innerWidth - box.offsetWidth;
					} else if (boxX <= 0) {
						boxX = 0;
					}
					box.style.left = boxX + 'px';

					if (boxY >= window.innerHeight - box.offsetHeight) {
						boxY = window.innerHeight - box.offsetHeight;
					} else if (boxY <= 0) {
						boxY = 0;
					}
					box.style.top = boxY + 'px';
					arrLeft.push(boxX)
					arrTop.push(boxY)
				};

			};
			document.addEventListener('mouseup', function () {
				document.onmousemove = 'null'
			})
			btn.onclick = function () {
				var x = arrLeft.length - 1
				var y = arrTop.length - 1

				var timer = setInterval(function () {
					box.style.left = arrLeft[x] + 'px';
					box.style.top = arrTop[y] + 'px';
					x--
					y--
					if (x < 0 && y < 0) {
						clearInterval(timer)
						arrTop = []
						arrLeft = []
					}
					// console.log(box.style.top)
					// console.log(box.style.left)
				}, 15)

			}

		});
	</script>

</head>

<body>
	<div class="box">
	</div>
	<button class="btn">点击还原运动轨迹</button>
</body>

</html>